<route-script>
    app.title = '评测结果'
    app.links = [{ text: '评测', to:'/judge' }];

    component.data = function () {
        return {
            control: { 
                statuses: statuses
            },
            id: '8c1185b7-4a35-499b-9344-3cd44bc732e4',
            hint: 'Main.cpp: In function \'int main()\': Main.cpp:58:17: error: \'putchar\' was not declared in this scope putchar(\'\\n\'); ^',
            code: '#include&lt;iostream&gt;\r\nusing namespace std;\r\nint main() \r\n {\r\n',
            substatuses: [{ status: 'Pending', time: 0, memory: 0, hint: '' }, { status: 'Pending', time: 0, memory: 0, hint: '' }]
        };
    };

    component.computed = {
        status: function () {
            if (this.substatuses.length) {
                var mapping = this.control.statuses.map(y => y.display);
                var indexes = this.substatuses.map(x => mapping.indexOf(x.status));
                var maxIndex = -1;
                for (var i = 0; i < indexes.length; i ++) {
                    maxIndex = Math.max(maxIndex, indexes[i]);
                }
                if (maxIndex >= 0 && maxIndex < this.control.statuses.length)
                    return this.control.statuses[maxIndex].display;
                else
                    return 'Unkown Result';
            } else {
                return 'Unknown Result';
            }
        }
    };

    component.methods = {
        toggleStatusHint: function (index) {
            var tr = $('.judge-panel-table tr');
            if (2 * index + 1 < tr.length) {
                $(tr[2 * index + 1]).toggle();
            }
        }
    };
</route-script>